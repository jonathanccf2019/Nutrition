<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>個人熱量及營養計算</title>
    
    <style>
        body {background-color: rgb(38, 38, 38);
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;}
        .container {max-width: 800px;
            margin: auto;
            padding: 20px;
            background-color: #444;
            border-radius: 10px;}
        table {width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            text-align: center;}
        th, td {padding: 10px;
            text-align: center;}
        th {background-color: #666;}
        td {background-color: #555;}
        .input-cell {background-color: white;
            color: black;
            width: 100px; /* 調整格子寬度 */
            padding: 8px;
            text-align: center;}
        .營養占比-cell {background-color: white;
            color: black;
            width: 30px; /* 調整格子寬度 */
            padding: 8px;
            text-align: center;}
        .下拉式選單-cell{background-color: white;
            color: black;
            width: 120px; /* 調整格子寬度 */
            padding: 8px;
            text-align: center;}
        .result-cell {background-color: #666;}
        .section-title {margin-top: 20px;}
        .error {color: red;}
        .orange-text {color: orange;}
        .green-text {color: #4CAF50;}
        .footer {text-align: center;margin-top: 20px;}
        .footer img {max-width: 100%;height: auto;}
        @media screen and (max-width: 600px) 
        {.breakable td {font-size: 0.8em;}}
    </style>
</head>
<body>
    <div class="container">
        <h1>個人熱量及營養計算</h1>
        <table>
                <tr>
                <td>性別</td>
                <td>
                    <select class="下拉式選單-cell" id="ID選擇性別">
                        <option value="">選擇性別</option>
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>運動程度</td>
                <td>
                    <select class="下拉式選單-cell" id="ID運動程度">
                        <option value="1.2">無運動(1.2)</option>
                        <option value="1.4">輕度運動(1.4)</option>
                        <option value="1.6">中度運動(1.6)</option>
                        <option value="1.8">重度運動(1.8)</option>
                        <option value="2">運動員(2)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>年齡</td>
                <td><input type="number" class="input-cell" id="ID年齡" placeholder="歲數"></td>
            </tr>
            <tr>
                <td>身高 (cm)</td>
                <td><input type="number" class="input-cell" id="ID身高" placeholder="公分"></td>
            </tr>
            <tr>
                <td>體重 (kg)</td>
                <td><input type="number" class="input-cell" id="ID體重" placeholder="公斤"></td>
            </tr>
            <tr>
                <td>計算公式</td>
                <td>
                    <select class="下拉式選單-cell" id="ID選擇公式">
                        <option value="ID米弗林">米弗林-聖約爾公式(本店採用)</option>
                        <option value="ID哈里斯">哈里斯-班尼迪克特公式</option>
                        <option value="ID修正哈里斯">修正版哈里斯-班尼迪克特公式</option>
                    </select>
                </td>
            </tr>
        </table>

        <h2>結果</h2>
        <table>
            
            <tr>
                <td>基礎代謝率 (BMR)</td>
                <td class="result-cell" id="ID公式基礎代謝">0</td>
            </tr>
            <tr>
                <td>基礎代謝(儀器測量)</td>
                <td><input type="number" class="input-cell" id="ID手動基礎代謝" placeholder="儀器測量數值"></td>
            </tr>
            <tr>
                <td>每日總熱量消耗 (TDEE)</td>
                <td class="result-cell" id="ID每日總熱量消耗">0卡</td>
            </tr>
        </table>

        <div class="section-title">
            <h2>增肌階段</h2>
        </div>
        <table>
            <tr>
                <th colspan="2">
                    <span class="orange-text">增肌</span>階段建議熱量增加100~300卡
                </th>
            </tr>
            <tr>
                <td>卡路里增加</td>
                <td><input type="number" class="input-cell" id="ID卡路里增加" value="150">卡</td>
            </tr>
            <tr>
                <td>每日總熱量目標</td>
                <td class="result-cell" id="ID增肌每日熱量目標">0卡</td>
            </tr>
        </table>
        <table>
            <tr>
                <th>所需要的營養</th>
                <td colspan="0" class=white><span id="ID增肌營養占比">營養占比100%</span></th>               </td>
                <th>半日</th>
                <th>每日</th>
            </tr>
            <tr>
                <td>蛋白質 (25~30%)</td>
                <td><input type="number" class="營養占比-cell" id="ID增肌蛋白質" value="27">%</td>
                <td class="result-cell" id="ID半日增肌蛋白質">0</td>
                <td class="result-cell" id="ID每日增肌蛋白質">0</td>
            </tr>
            <tr>
                <td>碳水化合物 (50~60%)</td>
                <td><input type="number" class="營養占比-cell" id="ID增肌碳水" value="55">%</td>
                <td class="result-cell" id="ID半日增肌碳水">0</td>
                <td class="result-cell" id="ID每日增肌碳水">0</td>
            </tr>
            <tr>
                <td>脂肪 (15~20%)</td>
                <td><input type="number" class="營養占比-cell" id="ID增肌脂肪" value="18">%</td>
                <td class="result-cell" id="ID半日增肌脂肪">0</td>
                <td class="result-cell" id="ID每日增肌脂肪">0</td>
            </tr>
        </table>

        <div class="section-title">
            <h2>減脂階段</h2>
        </div>
        <table>
            <tr>
                <th colspan="2">
                    <span class="green-text">減脂</span>階段建議熱量減少100~300卡
                </th>
            </tr>
            <tr>
                <td>卡路里減少</td>
                <td><input type="number" class="input-cell" id="ID卡路里減少" value="150">卡</td>
            </tr>
            <td>每日總熱量目標</td>
                <td class="result-cell" id="ID減脂每日熱量目標">0卡</td>
            </tr>
        </table>
        <table>
            <tr>
                <th>所需要的營養</th>
                <td colspan="0" class=white><span id="ID減脂營養占比">營養占比100%</span></td>
                <th>半日</th>
                <th>每日</th>
            </tr>
            <tr>
                <td>蛋白質 (35~45%)</td>
                <td><input type="number" class="營養占比-cell" id="ID減脂蛋白質" value="40">%</td>
                <td class="result-cell" id="ID半日減脂蛋白質">0</td>
                <td class="result-cell" id="ID每日減脂蛋白質">0</td>
            </tr>
            <tr>
                <td>碳水化合物 (30~40%)</td>
                <td><input type="number" class="營養占比-cell" id="ID減脂碳水" value="35">%</td>
                <td class="result-cell" id="ID半日減脂碳水">0</td>
                <td class="result-cell" id="ID每日減脂碳水">0</td>
            </tr>
            <tr>
                <td>脂肪 (20~30%)</td>
                <td><input type="number" class="營養占比-cell" id="ID減脂脂肪" value="25">%</td>
                <td class="result-cell" id="ID半日減脂脂肪">0</td>
                <td class="result-cell" id="ID每日減脂脂肪">0</td>
            </tr>
        </table>
        <tr class="breakable">
            <td colspan="4">營養需求換算：蛋白質1克=4卡、碳水化合物1克=4卡、脂肪1克=9卡</td>
        </tr>
        <br>
        <tr class="breakable">
            <td colspan="4">喬納森廚房製表，僅供參考，建議再向營養師或教練進行專業諮詢</td>
        </tr>
        <div id="fatLossError" class="error"></div>
   <div class="footer">
    <a href="https://line.me/R/ti/p/%40155mcdfk" target="_blank">
        <img src="https://jonathanccf2019.github.io/Nutrition/LOGO.png" alt="Footer Image">
    </a>
   </div>

    <script>
        document.getElementById('ID選擇性別').addEventListener('input', calculate);
        document.getElementById('ID年齡').addEventListener('input', calculate);
        document.getElementById('ID身高').addEventListener('input', calculate);
        document.getElementById('ID體重').addEventListener('input', calculate);
        document.getElementById('ID運動程度').addEventListener('input', calculate);
        document.getElementById('ID卡路里增加').addEventListener('input', calculate);
        document.getElementById('ID卡路里減少').addEventListener('input', calculate);
        document.getElementById('ID增肌蛋白質').addEventListener('input', calculate);
        document.getElementById('ID增肌碳水').addEventListener('input', calculate);
        document.getElementById('ID增肌脂肪').addEventListener('input', calculate);
        document.getElementById('ID減脂蛋白質').addEventListener('input', calculate);
        document.getElementById('ID減脂碳水').addEventListener('input', calculate);
        document.getElementById('ID減脂脂肪').addEventListener('input', calculate);
        document.getElementById('ID選擇公式').addEventListener('change', calculate);

        function calculate() {
            const ID選擇性別 = document.getElementById('ID選擇性別').value;
            const ID年齡 = parseFloat(document.getElementById('ID年齡').value);
            const ID身高 = parseFloat(document.getElementById('ID身高').value);
            const ID體重 = parseFloat(document.getElementById('ID體重').value);
            const ID運動程度 = parseFloat(document.getElementById('ID運動程度').value);
            var selectedFormula = document.getElementById('ID選擇公式').value;
     //bmr計算公式      
if (selectedFormula === 'ID米弗林') 
    {if (ID選擇性別 === '男') {bmr = (10 * ID體重) + (6.25 * ID身高) - (5 * ID年齡) + 5;} 
    else if (ID選擇性別 === '女') {bmr = (10 * ID體重) + (6.25 * ID身高) - (5 * ID年齡) - 161;}
    else {bmr = 0;}}
else if (selectedFormula === 'ID哈里斯') 
    {if (ID選擇性別 === '男') {bmr = 66.5 + (13.75 * ID體重) + (5.003 * ID身高) - (6.755 * ID年齡);}
    else if (ID選擇性別 === '女') {bmr = 655.1 + (9.563 * ID體重) + (1.85 * ID身高) - (4.676 * ID年齡);}
    else {bmr = 0;}} 
else if (selectedFormula === 'ID修正哈里斯') 
    {if (ID選擇性別 === '男') {bmr = 88.362 + (13.397 * ID體重) + (4.799 * ID身高) - (5.677 * ID年齡);}
    else if (ID選擇性別 === '女') {bmr = 447.593 + (9.247 * ID體重) + (3.098 * ID身高) - (4.330 * ID年齡);}
    else {bmr = 0;}}

            const tdee = bmr * ID運動程度;

            document.getElementById('ID公式基礎代謝').textContent = bmr.toFixed(1);
            const ID手動計算基礎代謝 = parseFloat(document.getElementById('ID手動基礎代謝').value) * ID運動程度;
            const tdeeWithActualBMR = ID手動計算基礎代謝 ? ID手動計算基礎代謝 : tdee;
            document.getElementById('ID每日總熱量消耗').textContent = tdeeWithActualBMR.toFixed(1) + ' 卡';
            const ID卡路里增加 = parseFloat(document.getElementById('ID卡路里增加').value);
            const muscleGainTdee = tdeeWithActualBMR + ID卡路里增加;
            const ID增肌蛋白質 = parseFloat(document.getElementById('ID增肌蛋白質').value);
            const ID增肌碳水 = parseFloat(document.getElementById('ID增肌碳水').value);
            const ID增肌脂肪 = parseFloat(document.getElementById('ID增肌脂肪').value);
            const ID增肌營養占比 = ID增肌蛋白質 + ID增肌碳水 + ID增肌脂肪;

            document.getElementById('ID增肌營養占比').textContent = `營養占比 ${ID增肌營養占比}%`;
            if (ID增肌營養占比 !== 100) {document.getElementById('ID增肌營養占比').style.color = 'red';} 
            else {document.getElementById('ID增肌營養占比').style.color = 'white';}
//熱量換算營養素
            const ID每日增肌蛋白質 = (muscleGainTdee * (ID增肌蛋白質 / 100)) / 4;
            const ID每日增肌碳水 = (muscleGainTdee * (ID增肌碳水 / 100)) / 4;
            const ID每日增肌脂肪 = (muscleGainTdee * (ID增肌脂肪 / 100)) / 9;

            document.getElementById('ID半日增肌蛋白質').textContent = (ID每日增肌蛋白質 / 2).toFixed(1)
            document.getElementById('ID每日增肌蛋白質').textContent = ID每日增肌蛋白質.toFixed(1)
            document.getElementById('ID半日增肌碳水').textContent = (ID每日增肌碳水 / 2).toFixed(1)
            document.getElementById('ID每日增肌碳水').textContent = ID每日增肌碳水.toFixed(1)
            document.getElementById('ID半日增肌脂肪').textContent = (ID每日增肌脂肪 / 2).toFixed(1)
            document.getElementById('ID每日增肌脂肪').textContent = ID每日增肌脂肪.toFixed(1)

            const ID卡路里減少 = parseFloat(document.getElementById('ID卡路里減少').value);
            const fatLossTdee = tdeeWithActualBMR - ID卡路里減少;

            const ID減脂蛋白質 = parseFloat(document.getElementById('ID減脂蛋白質').value);
            const ID減脂碳水 = parseFloat(document.getElementById('ID減脂碳水').value);
            const ID減脂脂肪 = parseFloat(document.getElementById('ID減脂脂肪').value);
            const ID減脂營養占比 = ID減脂蛋白質 + ID減脂碳水 + ID減脂脂肪;

            document.getElementById('ID減脂營養占比').textContent = `營養占比 ${ID減脂營養占比}%`;
            if (ID減脂營養占比 !== 100) {document.getElementById('ID減脂營養占比').style.color = 'red';} 
                else {document.getElementById('ID減脂營養占比').style.color = 'white';}

            const ID每日減脂蛋白質 = (fatLossTdee * (ID減脂蛋白質 / 100)) / 4;
            const ID每日減脂碳水 = (fatLossTdee * (ID減脂碳水 / 100)) / 4;
            const ID每日減脂脂肪 = (fatLossTdee * (ID減脂脂肪 / 100)) / 9;

            document.getElementById('ID半日減脂蛋白質').textContent = (ID每日減脂蛋白質 / 2).toFixed(1)
            document.getElementById('ID每日減脂蛋白質').textContent = ID每日減脂蛋白質.toFixed(1)
            document.getElementById('ID半日減脂碳水').textContent = (ID每日減脂碳水 / 2).toFixed(1)
            document.getElementById('ID每日減脂碳水').textContent = ID每日減脂碳水.toFixed(1)
            document.getElementById('ID半日減脂脂肪').textContent = (ID每日減脂脂肪 / 2).toFixed(1)
            document.getElementById('ID每日減脂脂肪').textContent = ID每日減脂脂肪.toFixed(1)
            document.getElementById('ID增肌每日熱量目標').textContent = muscleGainTdee.toFixed(1) + ' 卡'
            document.getElementById('ID減脂每日熱量目標').textContent = fatLossTdee.toFixed(1) + ' 卡'
        }
            document.getElementById('ID手動基礎代謝').addEventListener('input', calculate);
        calculate();
    </script>
</body>
</html>
